{% extends "university/university.html" %}

{% block java_script %}

	<script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyAVhEUFDeVH_RZKiww16p2NC4afR5O70to&sensor=false"></script>
	
	<!--Llamamos a la API de Google Maps-->
	<!--<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>-->

	<!--Plugin GMaps-->
	<script type="text/javascript" src="/static/js/gmaps.js"></script>

	<script type="text/javascript">


//    var objPlaces = new Array();
//    for (var j=0; j<{{misPuntos}}.length; j++){
//        for (var k=0; k<{{misPuntos}}[j].length; k++){
//            objPlaces[j][k].push({{misPuntos}}[j][k]);
//        }      
//    }   
    
    
    
    function setGoogleMarkers(map, places){
        
        for(var i=0; i<places.length; i++){
            var marker = new google.maps.Marker({
                position: new google.maps.LatLng(places[i][1], places[i][2]),
                map: map,
                icon: 'http://gmaps-samples.googlecode.com/svn/trunk/markers/green/blank.png',
                title: places[i][0]});        
     
            google.maps.event.addListener(marker, 'mouseup', function(){
                var popup = new google.maps.InfoWindow();
                var note = title;
                
                popup.setContent(note);
                popup.open(map, marker);
            });
        }
    };

    function initialize(){
        var n=1;
        var options = {
            zoom: 8,
            center: new google.maps.LatLng({{uni.latitud}}, {{uni.longitud}}),
            mapTypeId: google.maps.MapTypeId.ROADMAP};
        var marker = new google.maps.Marker({
                position: new google.maps.LatLng({{uni.latitud}}, {{uni.longitud}}),
                // True para desplazar el icono               
                draggable: false, 
                title: '{{uniname}}'});
        var infoWindow = new google.maps.InfoWindow({content: '{{uniname}}'});
        var map = new google.maps.Map(document.getElementById("googleMap"), options, marker, infoWindow);
        marker.setMap(map);
        /*setGoogleMarkers(map, {{misPuntos}});*/
        console.log("hola");
        console.log({{mispuntos|safe}});
/*var misPuntos = [
    ["Sagrada Familia", "41.403571", "2.174472", "icon1", "<div>html</div>"],
    ["Plaça Catalunya", "41.387097", "2.170072", "icon2", "<div>html</div>"],
    ["Estación de Sants", "41.379514", "2.140644", "icon3", "<div>html</div>"],
];*/
        setGoogleMarkers(map, {{mispuntos|safe}});
        infoWindow.open(map, marker);
    };

    google.maps.event.addDomListener(window, 'load', initialize);
	</script>

{% endblock %}


{% block pathimage %}
  <img src ="/tuerasmus/media/{{path_image}}" width="300px" heigth="300px"/>
{% endblock %}

{% block on_georesidence %}
	
  <div class="page-header">
    <h1><a href="/tuerasmus/university/{{uni_name}}" style="color: #424242">{{ uniname }}</a></h1>
    <h6>Pincha sobre el nombre de la universidad para ir al perfil de la universidad</h6>
  </div>
	<div class="row">

    {% if not list_empty %}
      <h3><center>No hay residencias registradas para esta universidad</center></h3>
    {% else %} 
    

    
		  <div class="col-xs-9">
			  <div id="googleMap" style="width:700px;height:500px;"></div>
		  </div>

		  <!--<div class="col-xs-3">
			  <div class="row">
				  <div class="col-xs-6">
					  <h2>Hong Kong</h2>
					  <address>
						  <strong>HK Business Address</strong><br>
						  100 Business Address<br>
						  Kowloon<br>
						  Hong Kong<br>
						  Hong Kong<br>
						  Zip Code N/A<br>
						  <abbr title="Phone">P:</abbr> 01234 567 890
					  </address>
				  </div>
			  </div>
			  <div class="row">
				  <div class="col-xs-6">
					  <h2>Shenzhen, P.R.C.</h2>
					  <address>
						  <strong>SZ Business Address</strong><br>
						  100 Business Address<br>
						  Futian District<br>
						  <br>
						  Shenzhen, Guangdong<br>
						  518000<br>
						  <abbr title="Phone">P:</abbr> 01234 567 890
					  </address>
				  </div>
			  </div>
		  </div>-->
		{% endif %}
		
	</div><!--/.row-->

{% endblock %}

